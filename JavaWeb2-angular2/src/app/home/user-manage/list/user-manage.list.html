<!--
<div>
    这是用户列表页面
    <a [routerLink]="['../add']">点我进入用户新增页面</a>
</div>
-->

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">用户管理-用户列表</h1>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div>
                <span>用户名</span>
                <div>
                    <input type="text" ng-model="username"/>
                </div>
            </div>
                <div>
                    <button ng-click="searchUser()" class="btn btn-sm">查询用户</button>
                </div>
                <div>
                    <button ng-click="createUser()" class="btn btn-sm btn-success" style="float: right">新增用户</button>
                </div>
            </div>
            <div class="panel-body">
                <div class="dataTable_wrapper" ng-if="users.length==0" align="center">无相关数据</div>
                <div class="dataTable_wrapper" ng-if="users.length!=0">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                        <tr>
                            <th>序号</th>
                            <th>用户名</th>
                            <th>用户姓名</th>
                            <th>角色名</th>
                            <th>邮箱</th>
                            <th>电话号码</th>
                            <th>注册日期</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <!--
                        	em标签参考[http://fontawesome.io/]
                        	白色、浅蓝色、深蓝色、绿色、黄色、红色、黑色
                        	btn、btn btn-default、btn-primary、btn btn-info、btn btn-success、btn btn-warning、btn btn-danger、btn btn-inverse
                        -->
                        <tbody>
                        <tr class="gradeA" ng-repeat="user in users">
                            <td>{{$index+1}}</td>
                            <td>{{user.username}}</td>
                            <td>{{user.personname}}</td>
                            <td ng-if="user.rolename!=''">{{user.rolename}}</td>
                            <td ng-if="user.rolename==''"><span style="color: red;">未分配角色</span></td>
                            <td>{{user.email}}</td>
                            <td>{{user.phone}}</td>
                            <td>{{user.createDate}}</td>
                            <td>
                                <button ng-click="deleteUser(user.userid)" title="删除用户" class="btn btn-sm btn-danger">
                                    <em class="fa fa-trash-o"></em>
                                </button>
                                <button ng-click="modifyUser(user)" title="修改用户" class="btn btn-sm btn-warning">
                                    <em class="fa fa-pencil"></em>
                                </button>
                                <button ng-click="userDetail(user)" title="用户详情" class="btn btn-sm btn-info">
                                    <em class="fa fa-book"></em>
                                </button>
                                <button ng-click="allotUserRole(user)" title="用户角色分配" class="btn btn-sm btn-primary">
                                    <em class="fa fa-cog"></em>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div style="float:right;">
            <a class="btn btn-sm btn-default" ng-click="refreshTable(1,0)">首页</a>
            <a class="btn btn-sm btn-default" ng-if="currentPage>1" ng-click="refreshTable(currentPage,-1)">上一页</a>
            <!--
            <span>
                <a class="btn btn-sm btn-default">1</a>
                <a class="btn btn-sm btn-default">2</a>
                <a class="btn btn-sm btn-default">3</a>
                <a class="btn btn-sm btn-default">4</a>
                <a class="btn btn-sm btn-default">5</a>
                <span class="btn btn-sm btn-default">…</span>
                <a class="btn btn-sm btn-default">10</a>
            </span>
            -->
            <a class="btn btn-sm btn-default" ng-if="totalPage>currentPage" ng-click="refreshTable(currentPage,1)">下一页</a>
            <a class="btn btn-sm btn-default" ng-if="totalPage!=currentPage" ng-click="refreshTable(totalPage,0)">末页</a>
            <span class="table">当前第{{currentPage}}页，共{{totalPage}}页</span>
        </div>
    </div>
</div>